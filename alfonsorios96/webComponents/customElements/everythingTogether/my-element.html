<script>

  ((customElements) => {
    class OtherComponent extends HTMLElement {
      constructor() {
        super();
        const shadowRoot = this.attachShadow({mode: 'open'});
        let mElement = document.createElement('my-element');
        mElement.setAttribute('content', this.getAttribute('text'));
        shadowRoot.appendChild(mElement);
      }
    }

    customElements.define('other-component', OtherComponent);
  })(window.customElements, document);

  (function myElement(customElements, document) {
    'use strict';

    class MyElement extends HTMLElement {

      constructor() {
        super();
        const shadowRoot = this.attachShadow({mode: 'open'});
        let pElem = document.createElement('p');
        pElem.textContent = this.getAttribute('content');
        shadowRoot.appendChild(pElem);

        this.addEventListener('click', () => {
          this.dispatchEvent(new CustomEvent('one-event', {
            bubbles: true,
            composed: true,
            cancelBubble: false
          }));
        });
      }
    }

    customElements.define('my-element', MyElement);
  })(window.customElements, document);
</script>

